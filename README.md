# AI Gallery (AImagine)

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python 3.9+](https://img.shields.io/badge/python-3.9+-blue.svg)](https://www.python.org/downloads/)
[![Node.js 18+](https://img.shields.io/badge/node-18+-green.svg)](https://nodejs.org/)
[![Docker](https://img.shields.io/badge/docker-ready-blue.svg)](https://www.docker.com/)

ä¸€ä¸ªåŸºäº Python FastAPI åç«¯å’Œ Astro å‰ç«¯çš„ç°ä»£åŒ–ã€å¤šç”¨æˆ·ã€æƒé™åˆ†æ˜çš„ Web åº”ç”¨ï¼Œç”¨äºé«˜æ•ˆç®¡ç†ã€æ£€ç´¢å’Œç‰ˆæœ¬æ§åˆ¶ AI ç”Ÿæˆçš„å›¾ç‰‡åŠå…¶å…ƒæ•°æ®ã€‚å›¾ç‰‡æ–‡ä»¶é€šè¿‡ä¸ Openlistï¼ˆAlistï¼‰é›†æˆè¿›è¡Œå­˜å‚¨å’Œè®¿é—®ã€‚

![AI Gallery Screenshot](docs/images/screenshot.png)

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ“¸ å›¾ç‰‡ç®¡ç†
- **æ™ºèƒ½ä¸Šä¼ **: æ”¯æŒæ‹–æ‹½ä¸Šä¼ ï¼Œè‡ªåŠ¨æå–å›¾ç‰‡å…ƒæ•°æ®
- **ç‰ˆæœ¬æ§åˆ¶**: åŸºäºå·²æœ‰å›¾ç‰‡åˆ›å»ºæ–°ç‰ˆæœ¬ï¼Œå½¢æˆå®Œæ•´çš„åˆ›ä½œæ ‘
- **æ‰¹é‡æ“ä½œ**: æ”¯æŒæ‰¹é‡ç¼–è¾‘ã€æ‰¹é‡åˆ é™¤ç­‰æ“ä½œ
- **äº‘ç«¯å­˜å‚¨**: é€šè¿‡ Openlist é›†æˆï¼Œæ”¯æŒå¤šç§äº‘å­˜å‚¨æœåŠ¡

### ğŸ” æœç´¢ä¸è¿‡æ»¤
- **å…¨æ–‡æœç´¢**: æ”¯æŒæç¤ºè¯ã€æ¨¡å‹ã€æ ‡ç­¾çš„æ¨¡ç³Šæœç´¢
- **é«˜çº§è¿‡æ»¤**: æŒ‰åˆ†ç±»ã€æ¨¡å‹ã€å¤šæ ‡ç­¾ç»„åˆè¿‡æ»¤
- **æ™ºèƒ½æ¨è**: åŸºäºç”¨æˆ·å†å²å’Œå›¾ç‰‡æ ‡ç­¾çš„æ™ºèƒ½æ¨è

### ğŸ·ï¸ å…ƒæ•°æ®ç®¡ç†
- **åˆ†ç±»ç³»ç»Ÿ**: é¢„è®¾å¤šä¸ªåˆ†ç±»ï¼Œæ”¯æŒè‡ªå®šä¹‰æ‰©å±•
- **æ ‡ç­¾ç³»ç»Ÿ**: çµæ´»çš„æ ‡ç­¾ç®¡ç†ï¼Œæ”¯æŒè‡ªåŠ¨è¡¥å…¨
- **æ¨¡å‹ç®¡ç†**: æ”¯æŒå„ç§ AI æ¨¡å‹çš„ç®¡ç†
- **å‚æ•°è®°å½•**: å®Œæ•´è®°å½•ç”Ÿæˆå‚æ•°ï¼Œæ–¹ä¾¿å¤ç°

### ğŸ‘¥ ç”¨æˆ·ç³»ç»Ÿ
- **è§’è‰²æƒé™**: ç®¡ç†å‘˜/æ™®é€šç”¨æˆ·æƒé™åˆ†ç¦»
- **èµ„æºéš”ç¦»**: ç”¨æˆ·åªèƒ½ç®¡ç†è‡ªå·±çš„ä½œå“
- **ä¸ªäººç©ºé—´**: æ¯ä¸ªç”¨æˆ·ç‹¬ç«‹çš„åˆ›ä½œç©ºé—´

### ğŸ¨ ç•Œé¢è®¾è®¡
- **å“åº”å¼è®¾è®¡**: å®Œç¾é€‚é…æ¡Œé¢ã€å¹³æ¿ã€æ‰‹æœº
- **æ·±è‰²æ¨¡å¼**: æ”¯æŒæ·±è‰²/æµ…è‰²ä¸»é¢˜åˆ‡æ¢
- **æ€§èƒ½ä¼˜åŒ–**: å›¾ç‰‡æ‡’åŠ è½½ã€è™šæ‹Ÿæ»šåŠ¨
- **äº¤äº’å‹å¥½**: æµç•…çš„åŠ¨ç”»å’Œæ“ä½œåé¦ˆ

## ğŸ›  æŠ€æœ¯æ ˆ

### åç«¯
- **æ¡†æ¶**: Python 3.9+ & FastAPI
- **æ•°æ®åº“**: SQLite (å¼€å‘) / PostgreSQL (ç”Ÿäº§)
- **ORM**: SQLAlchemy 2.0
- **è®¤è¯**: JWT (python-jose) + passlib
- **æ–‡ä»¶å­˜å‚¨**: Alist/Openlist é›†æˆ
- **APIæ–‡æ¡£**: è‡ªåŠ¨ç”Ÿæˆ OpenAPI/Swagger

### å‰ç«¯
- **æ¡†æ¶**: Astro 4.0+
- **UIç»„ä»¶**: Vue.js 3.4+ äº¤äº’ç»„ä»¶
- **æ ·å¼**: Tailwind CSS + PrimeVue
- **çŠ¶æ€ç®¡ç†**: Pinia
- **HTTPå®¢æˆ·ç«¯**: Axios
- **è·¯ç”±**: Vue Router

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä½¿ç”¨ Docker (æ¨è)

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/excniesNIED/AImagine.git
cd AImagine
```

2. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œä¿®æ”¹å¿…è¦çš„é…ç½®
```

3. **å¯åŠ¨æœåŠ¡**
```bash
# å¼€å‘ç¯å¢ƒ
docker-compose up -d

# ç”Ÿäº§ç¯å¢ƒ
docker-compose --profile production up -d
```

4. **è®¿é—®åº”ç”¨**
- å‰ç«¯: http://localhost:4321
- åç«¯API: http://localhost:8000
- APIæ–‡æ¡£: http://localhost:8000/docs
- Alist: http://localhost:5244

### æœ¬åœ°å¼€å‘

#### åç«¯è®¾ç½®

1. **åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ**
```bash
cd backend
conda create -n openaiga python=3.11 -y
conda activate openaiga
```

2. **å®‰è£…ä¾èµ–**
```bash
pip install -r requirements.txt
```

3. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶
```

4. **å¯åŠ¨åç«¯æœåŠ¡**
```bash
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

#### å‰ç«¯è®¾ç½®

1. **å®‰è£…ä¾èµ–**
```bash
cd frontend
npm install
```

2. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
npm run dev
```

## ğŸ“– è¯¦ç»†æ–‡æ¡£

### ç³»ç»Ÿåˆå§‹åŒ–

1. **åˆ›å»ºç®¡ç†å‘˜è´¦å·**
   - è®¿é—® http://localhost:4321/register
   - æ³¨å†Œç¬¬ä¸€ä¸ªç”¨æˆ·åï¼Œæ‰‹åŠ¨åœ¨æ•°æ®åº“ä¸­å°† role æ”¹ä¸º 'admin'

2. **é…ç½® Alist**
   - è®¿é—®ç®¡ç†åå° (éœ€è¦ç®¡ç†å‘˜æƒé™)
   - è¿›å…¥"ç³»ç»Ÿè®¾ç½®" â†’ "Alist é…ç½®"
   - å¡«å†™ Alist URLã€ç”¨æˆ·å/å¯†ç æˆ– Token
   - ç‚¹å‡»"æµ‹è¯•è¿æ¥"éªŒè¯é…ç½®

### ç”¨æˆ·æ‰‹å†Œ

#### æ™®é€šç”¨æˆ·åŠŸèƒ½

1. **ä¸Šä¼ å›¾ç‰‡**
   - ç‚¹å‡»"ä¸Šä¼ "æŒ‰é’®
   - æ‹–æ‹½æˆ–é€‰æ‹©å›¾ç‰‡æ–‡ä»¶
   - å¡«å†™æç¤ºè¯ã€é€‰æ‹©åˆ†ç±»ã€æ¨¡å‹ã€æ ‡ç­¾
   - å¯é€‰å¡«å†™è´Ÿé¢æç¤ºè¯å’Œé¢å¤–å‚æ•°
   - ç‚¹å‡»"ä¸Šä¼ ä½œå“"

2. **ç®¡ç†ä½œå“**
   - åœ¨ç”»å»Šä¸­æŸ¥çœ‹è‡ªå·±çš„ä½œå“
   - ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹è¯¦æƒ…
   - å¯ä»¥ç¼–è¾‘å…ƒæ•°æ®ä¿¡æ¯
   - å¯ä»¥åˆ é™¤ä½œå“ï¼ˆä¼šåŒæ—¶åˆ é™¤ Alist ä¸­çš„æ–‡ä»¶ï¼‰

3. **ç‰ˆæœ¬æ§åˆ¶**
   - åœ¨å›¾ç‰‡è¯¦æƒ…é¡µç‚¹å‡»"åŸºäºæ­¤å›¾åˆ›ä½œ"
   - ç³»ç»Ÿä¼šé¢„å¡«å……åŸæœ‰ä¿¡æ¯
   - ä¸Šä¼ æ–°å›¾ç‰‡åè‡ªåŠ¨å»ºç«‹ç‰ˆæœ¬å…³è”
   - åœ¨"ç‰ˆæœ¬å†å²"ä¸­æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬

4. **æœç´¢å’Œè¿‡æ»¤**
   - ä½¿ç”¨é¡¶éƒ¨æœç´¢æ¡†è¿›è¡Œå…¨æ–‡æœç´¢
   - ä½¿ç”¨åˆ†ç±»ã€æ¨¡å‹ä¸‹æ‹‰æ¡†è¿‡æ»¤
   - ç‚¹å‡»å¤šä¸ªæ ‡ç­¾è¿›è¡Œç»„åˆè¿‡æ»¤

#### ç®¡ç†å‘˜åŠŸèƒ½

1. **ç”¨æˆ·ç®¡ç†**
   - æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·åˆ—è¡¨
   - ä¿®æ”¹ç”¨æˆ·è§’è‰²ï¼ˆç®¡ç†å‘˜/æ™®é€šç”¨æˆ·ï¼‰
   - ç¦ç”¨/å¯ç”¨ç”¨æˆ·è´¦å·

2. **åˆ†ç±»ç®¡ç†**
   - æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤åˆ†ç±»
   - åˆå¹¶åˆ†ç±»ï¼ˆå°†ä¸€ä¸ªåˆ†ç±»åˆå¹¶åˆ°å¦ä¸€ä¸ªï¼‰

3. **æ ‡ç­¾ç®¡ç†**
   - æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤æ ‡ç­¾
   - æŸ¥çœ‹æ¯ä¸ªæ ‡ç­¾çš„ä½¿ç”¨æ•°é‡
   - åˆå¹¶æ ‡ç­¾ã€åˆ é™¤æœªä½¿ç”¨çš„æ ‡ç­¾

4. **æ¨¡å‹ç®¡ç†**
   - ç®¡ç† AI æ¨¡å‹åˆ—è¡¨
   - æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤æ¨¡å‹

5. **ç³»ç»Ÿè®¾ç½®**
   - é…ç½® Alist è¿æ¥å‚æ•°
   - æµ‹è¯• Alist è¿æ¥çŠ¶æ€
   - æŸ¥çœ‹ç³»ç»Ÿç»Ÿè®¡ä¿¡æ¯

### API æ–‡æ¡£

å¯åŠ¨åç«¯æœåŠ¡åï¼Œè®¿é—® http://localhost:8000/docs æŸ¥çœ‹å®Œæ•´çš„ API æ–‡æ¡£ã€‚

ä¸»è¦ API ç«¯ç‚¹ï¼š

- `POST /api/v1/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/v1/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `GET /api/v1/images` - è·å–å›¾ç‰‡åˆ—è¡¨
- `POST /api/v1/images` - ä¸Šä¼ å›¾ç‰‡
- `GET /api/v1/images/{id}` - è·å–å›¾ç‰‡è¯¦æƒ…
- `PUT /api/v1/images/{id}` - æ›´æ–°å›¾ç‰‡ä¿¡æ¯
- `DELETE /api/v1/images/{id}` - åˆ é™¤å›¾ç‰‡
- `GET /api/v1/images/{id}/versions` - è·å–ç‰ˆæœ¬å†å²
- `POST /api/v1/images/{id}/iterate` - åˆ›å»ºæ–°ç‰ˆæœ¬

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

#### åç«¯é…ç½®

```env
# Database
DATABASE_URL=sqlite:///./gallery.db

# Security
SECRET_KEY=your-secret-key-here-change-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Alist/Openlist
ALIST_URL=http://localhost:5244
ALIST_USERNAME=admin
ALIST_PASSWORD=admin123
ALIST_TOKEN=your-alist-token
ALIST_UPLOAD_PATH=/gallery
```

#### å‰ç«¯é…ç½®

å‰ç«¯é€šè¿‡ `.env` æ–‡ä»¶é…ç½® API åœ°å€ï¼š

```env
PUBLIC_API_URL=http://localhost:8000
```

### Openlist æ”¯æŒçš„å­˜å‚¨åç«¯

Openlist æ”¯æŒå¤šç§å­˜å‚¨åç«¯ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š
- æœ¬åœ°å­˜å‚¨
- é˜¿é‡Œäº‘ OSS
- è…¾è®¯äº‘ COS
- ç™¾åº¦ç½‘ç›˜
- OneDrive
- Google Drive
- AWS S3
- ç­‰ç­‰...

è¯¦ç»†é…ç½®è¯·å‚è€ƒ [Openlist å®˜æ–¹æ–‡æ¡£](https://doc.oplist.org)ã€‚

## ğŸ“¦ éƒ¨ç½²æŒ‡å—

### ä½¿ç”¨ Docker Compose (ç”Ÿäº§ç¯å¢ƒ)

1. **å‡†å¤‡æœåŠ¡å™¨**
   - Ubuntu 20.04+ æˆ– CentOS 8+
   - å®‰è£… Docker å’Œ Docker Compose
   - ç¡®ä¿ç«¯å£ 80ã€443 å¯ç”¨

2. **é…ç½® SSL è¯ä¹¦**
   - å°†è¯ä¹¦æ–‡ä»¶æ”¾å…¥ `ssl/` ç›®å½•
   - ä¿®æ”¹ `nginx.conf` ä¸­çš„è¯ä¹¦è·¯å¾„

3. **å¯åŠ¨æœåŠ¡**
```bash
docker-compose --profile production up -d
```

4. **é…ç½®åå‘ä»£ç†**
Nginx é…ç½®å·²åŒ…å«åœ¨ `nginx.conf` ä¸­ï¼Œä¼šè‡ªåŠ¨å¤„ç†ï¼š
- å‰ç«¯è·¯ç”±
- API ä»£ç†
- é™æ€æ–‡ä»¶ç¼“å­˜
- SSL ç»ˆæ­¢

### æ‰‹åŠ¨éƒ¨ç½²

#### åç«¯éƒ¨ç½²

1. **å®‰è£… Python 3.9+**

2. **å®‰è£…ä¾èµ–**
```bash
pip install -r requirements.txt
```

3. **é…ç½® Gunicorn**
```bash
pip install gunicorn
gunicorn app.main:app -w 4 -k uvicorn.workers.UvicornWorker -b 0.0.0.0:8000
```

4. **è®¾ç½® Systemd æœåŠ¡**
```ini
[Unit]
Description=AI Gallery Backend
After=network.target

[Service]
User=www-data
Group=www-data
WorkingDirectory=/path/to/backend
Environment=PATH=/path/to/venv/bin
ExecStart=/path/to/venv/bin/gunicorn app.main:app -w 4 -k uvicorn.workers.UvicornWorker -b 0.0.0.0:8000

[Install]
WantedBy=multi-user.target
```

#### å‰ç«¯éƒ¨ç½²

1. **æ„å»ºç”Ÿäº§ç‰ˆæœ¬**
```bash
npm run build
```

2. **ä½¿ç”¨ Nginx æˆ– Apache æ‰˜ç®¡ `dist/` ç›®å½•**

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å¼€å‘æŒ‡å—](./DEVELOPMENT.md) - è¯¦ç»†çš„å¼€å‘æ–‡æ¡£
- [æ•…éšœæ’é™¤](./TROUBLESHOOTING.md) - å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### ä½¿ç”¨åˆå§‹åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰

**Windows**:
```bash
init.bat
```

**Linux/macOS**:
```bash
./init.sh
```

åˆå§‹åŒ–è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
- å®‰è£…æ‰€æœ‰ä¾èµ–
- åˆå§‹åŒ–æ•°æ®åº“
- åˆ›å»ºé»˜è®¤æ•°æ®
- å¯åŠ¨åº”ç”¨

### ä½¿ç”¨ Python è„šæœ¬

```bash
python scripts/init.py
```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- [FastAPI](https://fastapi.tiangolo.com/) - ç°ä»£ã€å¿«é€Ÿçš„ Web æ¡†æ¶
- [Astro](https://astro.build/) - é¢å‘å†…å®¹çš„ Web æ¡†æ¶
- [Vue.js](https://vuejs.org/) - æ¸è¿›å¼ JavaScript æ¡†æ¶
- [Tailwind CSS](https://tailwindcss.com/) - å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶
- [Openlist](https://doc.oplist.org) - æ”¯æŒå¤šå­˜å‚¨çš„æ–‡ä»¶åˆ—è¡¨ç¨‹åº
- [PicList](https://github.com/Kuingsmile/PicList) - Openlist API ä¸Šä¼ æ–¹æ³•å‚è€ƒå®ç°
- [picgo-plugin-alist](https://github.com/jinzhi0123/picgo-plugin-alist) - Openlist API ä¸Šä¼ æ’ä»¶å‚è€ƒå®ç°
- [UIverse - Loading Animation by dexter-st](https://uiverse.io/dexter-st/bright-lizard-8) - å¼€æºå‰ç«¯åŠ è½½åŠ¨ç”»ç»„ä»¶
- [UIverse - Button Component by Pradeepsaranbishnoi](https://uiverse.io/Pradeepsaranbishnoi/heavy-dragonfly-92) - å¼€æºå‰ç«¯æŒ‰é’®ç»„ä»¶

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ªæ˜Ÿæ ‡ï¼